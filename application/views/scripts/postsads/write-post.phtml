<!DOCTYPE html>
<html lang="en-US">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<head>
	<meta charset="UTF-8">
	<title>Write Posts</title>
</head>
<?php 
$tr = Application_Form_FrmLanguages::getCurrentlanguage();
?>
<body  class="home page-template page-template-template-homepage-v1 page-template-template-homepage-v1-php page page-id-1291 single-author">
	<section class="container">
		<div class="conten-body">
			<div class="conten-body-left">
				<div class="step-blog">
					<ul class="SteppedProgress Vertical">
						<li class="complete boxed"><span>Post Ads</span></li>
						<li class="complete boxed"><span>Choose category</span></li>
						<li class=" complete current"><span>Description</span></li>
						<li class=" boxed"><span>Finish</span></li>
					</ul>
				</div>
			</div>
			<div class="conten-body-center right post-ads">
				<div class="title">
					<h4><span style='border: 1px dashed #b0c2d8;padding: 5px;font-size: 14px;'>
						<?php if (!empty($this->cate['parent_name'])){ echo $this->cate['parent_name'].'<i class="fa fa-angle-double-right" aria-hidden="true"></i>';} echo $this->cate['name']?>
						<a style="background:#e2c636;color:#fff;padding:5px;" href="<?php echo $this->baseUrl()."/postsads/choose-category";?>"> Change Category</a></span></h4> 
				</div>
				<div class="form-post-ads">
				<div id="alert" class="alert message">
				  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
				  <span id="alertMessage"></span>
				</div><!-- return validateFormAds(this); -->
					<form id="postads_form" onsubmit="return validateFormAds(this)" method="post" enctype="multipart/form-data" action="<?php echo $this->baseUrl()."/postsads/write-post";?>">
						<div class="form-row">
							<div class="form-label">
								<label>Title <span class="sign_req">*</span></label>
							</div>
							<div class="form-value">
								<input type="text" placeholder="Title"  name="title" id="title"  class="form-control" />
							</div>
						</div>
						<div class="form-row">
							<div class="form-label">
								<label>Ads Code <span class="sign_req">*</span></label>
							</div>
							<div class="form-value">
								<input type="text" placeholder="Your Product Code"  name="ads_code" id="ads_code" class="form-control" />
							</div>
						</div>
						<?php echo $this->form;?>
						<div class="form-row">
							<div class="form-label">
								<label>Price <span class="sign_req">*</span></label>
							</div>
							<div class="form-value">
								<input type="text" placeholder="Price"  name="price" id="price"   class="form-control" onkeypress="return isNumber(event);"/>
							</div>
						</div>
						<div class="form-row">
							<div class="form-label">
								<label>Description <span class="sign_req">*</span></label>
							</div>
							<div class="form-value">
								<textarea id="description" name="description" class="form-control textareadesc" placeholder="Description..."></textarea>
							</div>
						</div>
						<div class="form-row">
							<div class="form-label">
								<label>Link <span class="sign_req">*</span></label>
							</div>
							<div class="form-value">
								<input type="text" placeholder="Your Website"  name="link" id="link" class="form-control" />
							</div>
						</div>
						<div class="form-row">
							<div class="form-label">
								<label>Image </label>
							</div>
							<div class="form-value">
								<ul class="sortable grid">
								<?php $string=''; 
								$imageview="";
								$imageloadin = '<img src="'.$this->baseUrl().'/images/loader.gif" alt="Uploading...."/>';
								for ($i=0; $i<=6; $i++){ 
// 										$string.="
// 										jQuery('#filePhoto$i').click(function(e){
// 										var imageLoader$i = document.getElementById('filePhoto$i');
// 											imageLoader$i.addEventListener('change', handleImage$i, false);
										
// 											function handleImage$i(e) {
// 											var reader = new FileReader();
// 											reader.onload = function (event) {
// 												jQuery('#uploader$i img').attr('src',event.target.result);
// 												}
// 											reader.readAsDataURL(e.target.files[0]);
// 											}
// 										})";
									$string.="
										jQuery('#filePhoto$i').change(function() {
											var file = this.files[0];
											var imagefile = file.type;
											var match= ['image/jpeg','image/png','image/jpg'];
											if(!((imagefile==match[0]) || (imagefile==match[1]) || (imagefile==match[2])))
											{
												alert('Please Select A valid Image File! Only jpeg, jpg and png Images type allowed.');
												return false;
											}
											else
											{
												var reader = new FileReader();
												reader.readAsDataURL(this.files[0]);
											}
											jQuery('#index').val($i);
											jQuery('#postads_form').submit();
											});
									";
									$imageview.="var loadFile$i = function(event) {
									var output = document.getElementById('image_wiew$i');
									output.src = URL.createObjectURL(event.target.files[0]);
									};";
									?>
									<li>
										<div id="uploader<?php echo $i;?>" class="uploader">
											<div id='preview<?php echo $i;?>'></div>
												<img id="image_wiew<?php echo $i;?>" src="<?php echo $this->baseUrl();?>/images/broweimage.png"/>
												<input type="hidden" id="ads-image<?php echo $i;?>" name="ads-image<?php echo $i;?>" />
												<input class="filephoto" type="file" name="filePhoto<?php echo $i;?>"  id="filePhoto<?php echo $i;?>" accept="image/jpeg,image/gif,image/png" value='' onchange="loadFile<?php echo $i;?>(event)" />
										</div>
									</li>
									<?php }
									echo "<script>jQuery(document).ready(function() { jQuery(function() {".$string." }); }); $imageview</script>";?>
								</ul>
							</div>
						</div>
						<div class="form-row">
							<div class="form-label">
								<label>Location<span class="sign_req">*</span></label>
							</div>
							<div class="form-value">
								<select id="location" name="location" class="form-select" onchange="getAllDistrict();">
									<option value="-1" selected="selected">Select Location</option>
									<?php 
										if(!empty($this->rslocation)){
											foreach($this->rslocation as $rsl){
										?>
											<option value="<?php echo $rsl['id'];?>" ><?php echo $rsl['province_name'];?></option>
										<?php }
										} 
									?>
								</select>
								<input type="hidden"  name="category" id="category" value="<?php echo $this->cate['id'];?>" />
							</div>
						</div>
						<div class="form-row">
							<div class="form-label">
								<label>District<span class="sign_req"></span></label>
							</div>
							<div class="form-value">
								<label id="lbl_district">
									<select id="district" name="district" class="form-select">
										<option value="-1" selected="selected"><?php echo $tr->translate("Choose Distict");?></option>
									</select>
								</label>
								<label>District<span class="sign_req"></span></label>
								<label id="lbl_commune">
									<select id="commune" name="commune" class="form-select">
										<option value="-1" selected="selected"><?php echo $tr->translate("Choose Commune");?></option>
									</select>
								</label>
							</div>
						</div>
						<div class="col-md-12">
							<h2 style="text-align: center;">Contact Information</h2>
						</div>
						<div class="col-md-12">
							<div class="col-md-2">
								<label>Name <span class="sign_req">*</span></label>
							</div>
							<div class="col-md-3">
								<input type="hidden"  name="index" id="index"  />
								<input type="text" placeholder="Name" name="name" id="name" class="form-control" />
							</div>
							<div class="col-md-2">
								<label>Phone 1 <span class="sign_req">*</span></label>
							</div>
							<div class="col-md-3">
								<input type="text" placeholder="Phone"  name="phone1" id="phone1" value="<?php echo $this->client_info['phone'];?>"  required="required" class="form-control" />
							</div>
							<div class="col-md-2">
							
							</div>
						</div>
						<div class="col-md-12">
							<div class="col-md-2">
								<label>Phone 2</label>
							</div>
							<div class="col-md-3">
								<input type="text" placeholder="Phone"  name="phone2" id="phone2" class="form-control" />
							</div>
							<div class="col-md-2">
								<label>Email <span class="sign_req">*</span></label>
							</div>
							<div class="col-md-3">
								<input type="text" placeholder="Email"  name="email" id="email" value="<?php echo $this->client_info['email'];?>"  required="required" class="form-control" />
							</div>
							<div class="col-md-2"></div>
						</div>
						<div class="form-row">
							<div class="col-md-2">
								<label>Address <span class="sign_req">*</span></label>
							</div>
							<div class="col-md-8">
								<textarea id="adress" name="adress"  class="form-control " placeholder="Address..."><?php echo $this->client_info['address'];?></textarea>
							</div>
						</div>
						<div class="form-row ">
							<div class="form-label">
							</div>
							<div class="form-value">
								<input type="submit" class="loginBtn register" value='SUBMIT' label='SUBMIT'>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</section>
	<footer  class="footer">
		<div class="container footer-grid-3">					
			<div class="row">
				<div class="col-md-4 col-sm-6 col-xs-12">
					<div class="block-content clearfix">
						<h4 class="block-title">ABOUT CLASSIADS</h4>			
						<div class="textwidget">
							<p>
							Cam App Technology is the company provide the best IT solutions in Cambodia it was found by professional humane resource of information technology members.Moreover we have many experience with design and develop  professional website.We are focus on the following:Reliability,Security,Competitive market price. Flexibility,Accessibility ,Competence and skillful human resource,Quantity is our concern. 
							</p>
							<div class="widget-social footer-social-widget">
								<a href="#" target="_blank"><i class="fa fa-facebook"></i></a>				
								<a href="https://www.facebook.com/" target="_blank"><i class="fa fa-twitter"></i></a>				
								<a href="https://www.facebook.com/" target="_blank"><i class="fa fa-pinterest"></i></a>								
								<a href="https://www.facebook.com/" target="_blank"><i class="fa fa-google-plus"></i></a>								
								<a href="#" target="_blank"><i class="fa fa-youtube-play"></i></a>							
							</div>
							<a href="http://demo.designinvento.net/classiads4" title="Home">
								<img src="<?php echo $this->baseUrl();?>/images/logo.png" alt="Logo">
							</a>
						</div>
					</div>
				</div>
				<div class="col-md-4 col-sm-6 col-xs-12">
					<div class="block-content clearfix">
						<div class="footer-logo">
							<a class="footer-about-us" href="#" title="Home">
								<img src="<?php echo $this->baseUrl();?>/images/logo.png" alt="Logo">
							</a>
						</div>
						<div class="textwidget text-description">
							<p>
									Cam App Technology is the company provide the best IT solutions in Cambodia it was found by professional humane resource of information technology members.Moreover we have many experience with design and develop professional website.We are focus on the following:Reliability,Security,Competitive market price. Flexibility,Accessibility ,Competence and skillful human resource,Quantity is our concern.						

							</p>
						</div>
					</div>
				</div>
				
				<div class="col-md-4 col-sm-6 col-xs-12">
					<div class="block-content clearfix">
						<h4 class="block-title">Get In Touch</h4>			
					</div>
				</div>			
			</div>			
		</div>			
	</footer>
	<section class="socket"  style="background-color:#262626;">
		<div class="container">
			<div class="site-info"  style="color:#999999;">
								 All copyrights reserved &#x00040; 2017 - Design &AMP; Development by <a href="http://cam-app.com/">Cam App Technology</a>
			</div><!-- .site-info -->
			<div class="footer-menu">
				<ul id="menu-footer" class="menu"><li id="menu-item-4384" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4384"><a>Home</a></li>
					<li id="menu-item-4328" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4328"><a href="blog/index.html">BLOG</a></li>
					<li id="menu-item-4331" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4331"><a href="pricing-plans/index.html">PRICING PLANS</a></li>
					<li id="menu-item-4330" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4330"><a href="contact/index.html">CONTACT</a></li>
				</ul>					
			</div>
		</div>
	</section>
	
</body>
<script>
//$('#city, #commune, #office').select2({ width: '100%' });
//	changeProvince();
		
		/*$('#commune').change(function () {
			changeCommune();
		});*/
		
</script>

<script>
var url_district = '<?php echo $this->url(array('module'=>'default','controller'=>'postsads','action'=>'get-districtbyid'));?> ';
function getAllDistrict(){
	var pro_id = $('#location').val();
		$.ajax({
			url: url_district,
			type: "post",
			data:{'pro_id':pro_id},
			success: function(data){
				datars = $.parseJSON(data);
				stringhtml='<select onchange="getCommuneById()" id="district" name="district" class="form-select">';
				stringhtml+='<option value="0" selected="selected"><?php echo $tr->translate("Choose Distict");?></option>';
				for(j=0;j<datars.length;j++){
					stringhtml+='<option value="'+datars[j].id+'">'+datars[j].district_name+'</option>';
				}
				stringhtml+='</select';
				document.getElementById('lbl_district').innerHTML=stringhtml;
				stringcommune='<select id="commune" name="commune" class="form-select"><option><?php echo $tr->translate("Choose Commune");?></option></select>';
				document.getElementById('lbl_commune').innerHTML=stringcommune;
				var noResult = jQuery(".form-select").data('noResult');
				jQuery(".form-select").chosen({});
			},
			error:function(err){
				alert(err);
			}
		});
}
var url_commune = '<?php echo $this->url(array('module'=>'default','controller'=>'postsads','action'=>'get-communebyid'));?> ';
function getCommuneById(){
	var commune_id = $('#district').val();
	if(commune_id==0){return false;}
	$.ajax({
		url: url_commune,
		type: "post",
		data:{'distict_id':commune_id},
		success: function(data){
			datars = $.parseJSON(data);
			stringhtml='<select id="commune" name="commune" class="form-select">';
			stringhtml+='<option value="0" selected="selected"><?php echo $tr->translate("Choose Commune");?></option>';
			for(j=0;j<datars.length;j++){
				stringhtml+='<option value="'+datars[j].id+'">'+datars[j].commune_name+'</option>';
			}
			stringhtml+='</select';
			document.getElementById('lbl_commune').innerHTML=stringhtml;
			var noResult = jQuery(".form-select").data('noResult');
			jQuery(".form-select").chosen({});
		},
		error:function(xhr){
		}
	});
}
</script>
</html>